# DayLevelDataPlotter output overview

## Excel Report: 
- *Filename*: `{timestamp}_extracted_records_{date}.xlsx`
- Including 4 sheets (`selectedDateFilter`, `moldBasedRecords`, `itemBasedRecords`, `summaryStatics`) generated by `DayLevelDataProcessor`.
  
### From YearLevelDataProcessor:
- 4 sheets `selectedDateFilter`, `moldBasedRecords`, `itemBasedRecords`, `summaryStatics` generated by: `DayLevelDataProcessor` ([→ see detail](https://github.com/ThuyHaLE/OptiMoldIQ/blob/main/docs/documentations/analyticsOrchestrator/multiLevelDataAnalytics/OptiMoldIQ_dayLevelDataProcessor_overview.md)) 

#### 1. Sheet 1 — selectedDateFilter:
- *Description*: Contains all raw production records for the selected date, after merging productRecords with purchaseOrders. This dataset preserves row-level information before any aggregation.
- *Key Columns:*:
    | Column                                   | Description                                                                                      |
    | ---------------------------------------- | ------------------------------------------------------------------------------------------------ |
    | `recordDate`                             | Date of production record                                                                        |
    | `machineInfo`                            | Combined info from `machineNo` and `machineCode`                                                 |
    | `workingShift`                           | Shift identifier for production                                                                  |
    | `poNo`                                   | Purchase order number                                                                            |
    | `itemInfo`                               | Combined info from `itemCode` and `itemName`                                                     |
    | `itemComponent`                          | Tuple of component codes (`plasticResinCode`, `colorMasterbatchCode`, `additiveMasterbatchCode`) |
    | `itemTotalQuantity` / `itemGoodQuantity` | Total vs. qualified product quantities                                                           |
    | `moldNo`, `moldShot`, `moldCavity`       | Mold identification and performance metrics                                                      |
    | `changeType`                             | Classified as `mold_change`, `color_change`, `mold&color_change`, `machine_idle`, or `no_change` |
    | `jobCount`                               | Count of jobs processed in that machine-shift group                                              |
    | `lateStatus`                             | Boolean indicating delay vs. `poETA` (if available)                                              |

#### 2. Sheet 2 — moldBasedRecords:
- *Description*: Aggregated performance by mold and working shift, capturing mold-level production and defect rates.
- *Processing Logic*:
    - Groups records by `machineInfo`, `workingShift`, and `moldNo`
    - Separates and aggregates based on changeType
    - Computes defect quantities and defect rates (`defectRate` = (`defectQuantity` / `itemTotalQuantity`) * 100)
    - Handles color_change jobs with aggregated averages (`moldShot`, `moldCavity`)
- *Key Columns:*:
    | Column                                  | Description                               |
    | --------------------------------------- | ----------------------------------------- |
    | `machineInfo`, `workingShift`, `moldNo` | Grouping keys                             |
    | `itemTotalQuantity`, `itemGoodQuantity` | Aggregated quantities per mold            |
    | `defectQuantity`, `defectRate`          | Calculated from total vs. good quantity   |
    | `moldShot`, `moldCavity`                | Mean values across shift or color changes |
    | `changeType`                            | Mold activity category                    |

#### 3. Sheet 3 — itemBasedRecords:
- *Description*: 
    - Summarized production data grouped by item (product).
    - Helps identify machine utilization and mold diversity for each item.
- *Processing Logic*:
    - Aggregates by `itemInfo`
    - Computes sums for total/good quantities, counts for machines, molds, and components
    - Derives defect quantities and defect rates
    - Removes null or invalid item rows
- *Key Columns:*:
    | Column                                                 | Description                               |
    | ------------------------------------------------------ | ----------------------------------------- |
    | `itemInfo`                                             | Product info (code + name)                |
    | `itemTotalQuantity`, `itemGoodQuantity`                | Aggregated totals                         |
    | `defectQuantity`, `defectRate`                         | Computed from total vs. good quantity     |
    | `usedMachineNums`, `usedMoldNums`, `usedComponentNums` | Unique machine/mold/component counts used |
    | `totalShifts`                                          | Number of shifts recorded for the item    |
    | `moldTotalShots`                                       | Total shots across molds used             |
    | `avgCavity`                                            | Average cavity number                     |

#### 4. Sheet 4 — summaryStatics:
- *Description*: Key KPIs and distribution metrics for the day’s production run.
- *Key Columns:*:
    | Metric                            | Meaning                                          |
    | --------------------------------- | ------------------------------------------------ |
    | `record_date`                     | Selected production date                         |
    | `total_records`                   | Total number of records processed                |
    | `active_jobs`                     | Number of jobs with positive `itemTotalQuantity` |
    | `working_shifts`                  | Number of unique working shifts detected         |
    | `machines`                        | Number of machines involved                      |
    | `purchase_orders`                 | Unique purchase orders processed                 |
    | `products`                        | Unique product codes detected                    |
    | `molds`                           | Unique molds detected                            |
    | `late_pos` / `total_pos_with_eta` | Count of late vs. total POs with ETA data        |
    | `change_type_distribution`        | Frequency breakdown by `changeType`              |

- *Summary of Relationships*:
    | Sheet              | Derived From               | Aggregation Level | Primary Use                            |
    | ------------------ | -------------------------- | ----------------- | -------------------------------------- |
    | selectedDateFilter | Raw merged data            | None              | Record-level traceability              |
    | moldBasedRecords   | `_mold_based_processing()` | Mold + shift      | Mold performance and defect monitoring |
    | itemBasedRecords   | `_item_based_processing()` | Item-level        | Product-level production efficiency    |
    | summaryStatics     | `generate_summary_stats()` | Global            | KPIs and daily overview                |

## PNG Visualizations (8 files): 
### 1. Frequency and distribution of changeovers (mold, item, and item component changes) Dashboard
- *Filename*: `change_times_all_types_fig_{date}.png`
- *Generated by*: `change_times_all_types_plotter()`
- *Purpose*:
    - Visualizes the frequency and distribution of changeovers (mold, item, and item component changes) across different machines and working shifts.
    - Helps identify high-frequency changeover patterns and potential efficiency bottlenecks.
- *Input Features*:
    | Feature                                        | Description                                                 |
    | ---------------------------------------------- | ----------------------------------------------------------- |
    | `recordDate`                                   | Production record date                                      |
    | `workingShift`                                 | Shift index (used as X-axis)                                |
    | `machineInfo`                                  | Machine identifier (used to group plots by machine)         |
    | `changeType`                                   | Changeover category (e.g., `mold`, `item`, `itemComponent`) |
    | `moldCount`, `itemCount`, `itemComponentCount` | Number of changes per type                                  |
    | `visualization_config_path` *(optional)*       | Custom JSON config for plot style and layout                |
    | *(Other manufacturing features)*               | Used for validation only                                    |
- *Processing Logic*:
    - Validation: Ensures all required columns are present using `validate_dataframe()`.
    - Configuration: Loads default or external visualization config via `load_visualization_config()`.
    - Layout:
        - Each machine occupies one row with 3 subplots (mold/item/item-component).
        - Layout auto-adjusts figure height by number of machines.
    - Plotting:
        - Line plots per change type across working shifts.
        - Annotates each point with changeType label and color-coded markers.
        - Configures integer Y-ticks, dynamic Y-limits, and grid visibility.
- *Output Features*:
    | Output                                  | Type                       | Description                                     |
    | --------------------------------------- | -------------------------- | ----------------------------------------------- |
    | `change_times_all_types_fig_{date}.png` | `.png` image               | Composite figure of all machines × change types |
    | `Figure` object                         | `matplotlib.figure.Figure` | Can be displayed or saved externally            |
    | **Subplots**                            | 3 per machine              | Mold / Item / Item Component change trends      |
    | **Legend**                              | Auto-generated             | Color mapping for each `changeType`             |

### 2. Item-based Overview Dashboard:
- *Filename*: `item_based_overview_dashboard_{date}.png`
- *Generated by*: `item_based_overview_plotter()`
- *Purpose*: Builds a comprehensive performance dashboard for item-based manufacturing data, combining defect rate, efficiency, resource usage, and production shares into one unified figure.
- *Input Features*:
    | Feature                                                | Description                                             |
    | ------------------------------------------------------ | ------------------------------------------------------- |
    | `itemInfo`                                             | Item identifier and description                         |
    | `itemTotalQuantity`, `itemGoodQuantity`                | Total and good product quantities                       |
    | `defectQuantity`, `defectRate`                         | Defect counts and rates (%)                             |
    | `usedMachineNums`, `usedMoldNums`, `usedComponentNums` | Resource usage per item                                 |
    | `moldTotalShots`                                       | Total mold shots associated with each item              |
    | `avgCavity`                                            | Average cavity count per mold                           |
    | `totalShifts`                                          | Number of active shifts per item                        |
    | `visualization_config_path` *(optional)*               | Custom JSON configuration for style, colors, and layout |
- *Processing Logic*:
    - Validation & Preprocessing
        - Checks required fields using `validate_dataframe()`.
        - Computes missing efficiency (% good units / total units).
        - Cleans item names and fills missing numeric values.
    - Configuration: Loads default or external visualization config via `load_visualization_config()` and `add_custom_colors()`.
    - Figure Composition
        - Generates an 8-panel dashboard (4×2 grid):
            - Defect Rate Analysis
            - Production Efficiency
            - Production Volume Comparison
            - Total Shots by Product
            - Resource Usage
            - Cavity vs Shots (Scatter + Trend)
            - Shots Share (Pie)
            - Production Share (Pie)
- *Output Features*:
    | Output                               | Type                                                   | Description                                      |
    | ------------------------------------ | ------------------------------------------------------ | ------------------------------------------------ |
    | `item_based_overview_fig_{date}.png` | `.png` image                                           | Full item-level manufacturing overview dashboard |
    | `Figure` object                      | `matplotlib.figure.Figure`                             | Multi-panel figure with 8 analytics plots        |
    | **Subplots (8 total)**               |                                                        |                                                  |
    | • Defect Rate                        | Color-coded barh chart with thresholds (≤2%, ≤5%, >5%) |                                                  |
    | • Efficiency                         | Gradient barh plot with 90% / 95% reference lines      |                                                  |
    | • Production Volume                  | Total vs Good output comparison                        |                                                  |
    | • Total Shots                        | Gradient scale of shot counts                          |                                                  |
    | • Resource Usage                     | Grouped bar chart for machines/components/molds        |                                                  |
    | • Cavity vs Shots                    | Scatter with colorbar + trendline                      |                                                  |
    | • Shots Share                        | Pie chart (Top 6 + Others)                             |                                                  |
    | • Production Share                   | Pie chart (Top 6 + Others)                             |                                                  |

### 3. Yield efficiency per machine Dashboard:
- *Filename*: `machine_level_yield_efficiency_chart_{date}.png`
- *Generated by*: `machine_level_yield_efficiency_plotter()`
- *Purpose*: Visualizes yield efficiency per machine, combining stacked item quantity bars and good item trends to evaluate production performance and machine output balance.
- *Input Features*:
    | Feature                                                    | Description                                                |
    | ---------------------------------------------------------- | ---------------------------------------------------------- |
    | `machineNo`, `machineCode`                                 | Machine identifiers used for grouping and labeling         |
    | `itemName`, `itemCode`                                     | Product identifiers displayed in stacked bars              |
    | `itemTotalQuantity`, `itemGoodQuantity`                    | Total and good production quantities per machine–item pair |
    | `recordDate`, `workingShift`                               | Metadata used for filtering and validation                 |
    | `poNo`, `poETA`, `moldNo`, `moldCavity`, `moldShot`        | Production traceability fields                             |
    | `colorChanged`, `moldChanged`, `machineChanged`            | Changeover indicators (used for completeness validation)   |
    | `plasticResin`, `colorMasterbatch`, `additiveMasterbatch`  | Material-related context fields                            |
    | `itemCount`, `moldCount`, `itemComponentCount`, `jobCount` | Summary-level indicators                                   |
    | *(Other fields)*                                           | Used for validation only, not plotted                      |
    | `visualization_config_path` *(optional)*                   | Path to custom visualization JSON config                   |
    | Feature                                                    | Description                                                |
    | ---------------------------------------------------------- | ---------------------------------------------------------- |
    | `machineNo`, `machineCode`                                 | Machine identifiers used for grouping and labeling         |
    | `itemName`, `itemCode`                                     | Product identifiers displayed in stacked bars              |
    | `itemTotalQuantity`, `itemGoodQuantity`                    | Total and good production quantities per machine–item pair |
    | `recordDate`, `workingShift`                               | Metadata used for filtering and validation                 |
    | `poNo`, `poETA`, `moldNo`, `moldCavity`, `moldShot`        | Production traceability fields                             |
    | `colorChanged`, `moldChanged`, `machineChanged`            | Changeover indicators (used for completeness validation)   |
    | `plasticResin`, `colorMasterbatch`, `additiveMasterbatch`  | Material-related context fields                            |
    | `itemCount`, `moldCount`, `itemComponentCount`, `jobCount` | Summary-level indicators                                   |
    | *(Other fields)*                                           | Used for validation only, not plotted                      |
    | `visualization_config_path` *(optional)*                   | Path to custom visualization JSON config                   |
- *Processing Logic*:
    - Validation & Preprocessing
        - Confirms required columns using `validate_dataframe()`.
        - Aggregates item totals and good quantities by machine and item.
        - Creates a pivot table (machineNo × itemName) for stacked plotting.
        - Computes yield efficiency (%) per machine with zero-division handling.
    - Dynamic Plot Configuration
        - Loads default or external visualization config via `load_visualization_config()`.
        - Determines figure size and label parameters with `determine_plot_settings()` based on the number of machines.
        - Generates color palette dynamically using `generate_color_palette()`.
    - Chart Construction
        - Builds stacked bar chart of item totals per machine.
        - Overlays good quantity trend line (red markers) across machines.
        - Annotates yield efficiency values (%) above bars with adaptive spacing and scaling.
        - Optionally limits legend entries to top 15 items by production volume.
- *Output Features*:
    | Output                                          | Type                                                      | Description                                  |
    | ----------------------------------------------- | --------------------------------------------------------- | -------------------------------------------- |
    | `machine_level_yield_efficiency_fig_{date}.png` | `.png` image                                              | Machine-level yield efficiency visualization |
    | `Figure` object                                 | `matplotlib.figure.Figure`                                | Reusable Matplotlib figure                   |
    | **Visual Components**                           |                                                           |                                              |
    | • Stacked Bar Chart                             | `itemTotalQuantity` distribution per machine × item       |                                              |
    | • Trend Line                                    | Red curve representing `itemGoodQuantity` per machine     |                                              |
    | • Efficiency Annotations                        | Text labels showing yield rate (%)                        |                                              |
    | • Legend                                        | Top 15 items + trend indicator (auto-truncated if needed) |                                              |
    | • Summary Text                                  | Aggregated totals and global yield efficiency             |                                              |        

### 4. Machine-based Mold Analysis Dashboard:
- *Filename*: `machine_level_mold_analysis_chart_{date}.png`
- *Generated by*: `machine_level_mold_analysis_plotter()`
- *Purpose*: Analyzes mold change patterns and shot counts by machine and shift, integrating bar, scatter, and trend-line visuals to reveal production consistency and operational balance.
- *Input Features*:
    | Feature                                  | Description                                     |
    | ---------------------------------------- | ----------------------------------------------- |
    | `machineNo`, `machineCode`               | Machine identifiers used for grouping           |
    | `workingShift`                           | Shift index (used for hue and trend separation) |
    | `moldCount`                              | Number of mold changes per shift per machine    |
    | `moldShot`                               | Mold shot count (sum/mean per shift)            |
    | `itemCode`, `itemName`                   | Product identifiers (for validation)            |
    | `recordDate`, `poNo`, `poETA`            | Record and order metadata                       |
    | *(Other manufacturing fields)*           | Used only for validation consistency            |
    | `visualization_config_path` *(optional)* | Path to custom visualization configuration      |
    | `max_machines_display`                   | Cap on number of machines shown (default = 50)  |
    | `enable_scatter`, `enable_trends`        | Toggles for scatter and trend overlay           |
- *Processing Logic*:
    - Validation & Cleaning
        - Confirms presence of all required fields via `validate_dataframe()`.
        - Removes rows with missing workingShift, machineNo, moldShot, or moldCount.
        - Limits dataset to a configurable number of machines for large-scale efficiency.
    - Configuration
        - Loads default or external visualization config via `load_visualization_config()`.
        - Uses adaptive layout parameters (figsize, label rotation, bar width) from `get_layout_config()`.
        - Generates color palette by number of unique shifts.
    - Plot Construction
        - Primary Y-axis: Bar plot showing moldCount per machine per shift (using Seaborn).
        - Secondary Y-axis: Optional scatter points (moldShot_mean) and machine-level trend lines.
        - Layout and style optimized for up to 50 machines with dynamic scaling for large datasets.
- *Output Features*:
    | Output                                       | Type                                               | Description                                             |
    | -------------------------------------------- | -------------------------------------------------- | ------------------------------------------------------- |
    | `machine_level_mold_analysis_fig_{date}.png` | `.png` image                                       | Combined visualization for mold changes and shot trends |
    | `Figure` object                              | `matplotlib.figure.Figure`                         | Plot with dual Y-axes (Count & Shot)                    |
    | **Visual Components**                        |                                                    |                                                         |
    | • Bar Plot                                   | `moldCount` per machine × shift (colored by shift) |                                                         |
    | • Scatter Plot *(optional)*                  | Mean `moldShot` overlay points per shift           |                                                         |
    | • Trend Lines *(optional)*                   | Continuous mold-shot trend per machine             |                                                         |
    | • Dual Legends                               | Separate legends for count and shot indicators     |                                                         |

### 5. Mold-based Overview Dashboard:
- *Filename*: `mold_based_overview_dashboard_{date}.png`        
- *Generated by*: `mold_based_overview_plotter()`
- *Purpose*: Provides a comprehensive visual overview of mold-based manufacturing data, analyzing production volume, defect behavior, and performance variation across molds and working shifts.
- *Input Features*:
    | Feature                                  | Description                                |
    | ---------------------------------------- | ------------------------------------------ |
    | `machineInfo`                            | Machine identifier                         |
    | `workingShift`                           | Shift index                                |
    | `moldNo`                                 | Mold code used for grouping and comparison |
    | `moldShot`                               | Total number of mold shots                 |
    | `moldCavity`                             | Number of cavities per mold                |
    | `itemTotalQuantity`                      | Total items produced per mold              |
    | `itemGoodQuantity`                       | Number of good (non-defective) items       |
    | `changeType`                             | Changeover type (for context filtering)    |
    | `defectQuantity`                         | Total defective items                      |
    | `defectRate`                             | Defective item rate (%)                    |
    | *(Optional)* `visualization_config_path` | Custom JSON config for styling             |
- *Processing Logic*:
    - Validation: Confirms presence of all required fields via `validate_dataframe()`.
    - Configuration: Loads default or external visualization config via `load_visualization_config()`.
    - Chart Construction
        - Creates a 5×2 grid layout with 10 specialized subplots, each focused on one manufacturing aspect
        - Each subplot is created via modular plotting functions:
            - Production by Mold & Shift – total quantity per shift.
            - Defect Rate Analysis – mean defect rate across molds and shifts.
            - Production Heatmap – quantity distribution visualized with seaborn.
            - Shift Trend Overview – total vs. good production + defect rate line.
            - Cavity Analysis – total cavities by mold and shift.
            - Defect Rate by Mold – per-mold defect comparison.
            - Shot Distribution – total shot count per mold.
            - Shots vs Defect Rate – scatter correlation.
            - Shot Variation – boxplot of shot count across shifts.
            - Good vs Defective Distribution – stacked bar per mold.
- *Output Features*:
    | Output                               | Type                       | Description                                |
    | ------------------------------------ | -------------------------- | ------------------------------------------ |
    | `mold_based_overview_fig_{date}.png` | `.png` image               | Composite dashboard of 10 subplots         |
    | `Figure` object                      | `matplotlib.figure.Figure` | Complete figure for display/export         |
    | **Subplots**                         | 10 total                   | Mold-based metrics and correlations        |
    | **Legend & Labels**                  | Dynamic                    | Adjusted per subplot for clarity           |
    | **Visual Style**                     | Seaborn-based              | Defined in `DEFAULT_CONFIG` or JSON config |       

### 6. Shift-based Detailed Yield Efficiency Dashboard:
- *Filename*: `shift_level_detailed_yield_efficiency_chart_{date}.png`
- *Generated by*: `shift_level_detailed_yield_efficiency_plotter()`
- *Purpose*:
    - Visualizes shift-level manufacturing performance for each machine, combining stacked bar charts (total production quantity by item) and line plots (good quantity trends).
    - Provides detailed insights into yield efficiency variations across shifts and machines.
- *Input Features*:
    | Feature                                  | Description                                                                       |
    | ---------------------------------------- | --------------------------------------------------------------------------------- |
    | `recordDate`                             | Production record date                                                            |
    | `workingShift`                           | Shift index (used as X-axis)                                                      |
    | `machineNo`                              | Numeric machine identifier (used for subplots)                                    |
    | `machineCode`                            | Machine label (metadata)                                                          |
    | `itemName`                               | Item name (used as stacked bar categories)                                        |
    | `itemTotalQuantity`                      | Total produced quantity per item and shift                                        |
    | `itemGoodQuantity`                       | Number of non-defective products per item and shift                               |
    | *(Other defect-related columns)*         | Used for validation only (`itemBlackSpot`, `itemOilDeposit`, etc.)                |
    | `visualization_config_path` *(optional)* | Path to external JSON config for visual customization                             |
    | *(Metadata columns)*                     | Include `poNo`, `moldNo`, `plasticResinCode`, etc. — validated but not visualized |
- *Processing Logic*
    - Validation
    - Ensures all required production columns exist using `validate_dataframe()`.
    - Missing columns trigger descriptive validation errors before plotting.
    - Configuration
    - Loads user-defined or default visualization parameters via `load_visualization_config()`.
    - Machine-wise Data Preparation: Extracts unique machineNo values and computes
    - Figure Layout Determination: 
    - Calls `determine_plot_settings()` to decide number of rows, columns, and figure size based on machine count
    - For each machine subplot:
        - Draws stacked bar chart (total quantities by item).
        - Overlays green line plot for good_by_shift (yield efficiency trend).
- *Output Features*:
    | Output                                                 | Type                       | Description                                             |
    | ------------------------------------------------------ | -------------------------- | ------------------------------------------------------- |
    | `shift_level_detailed_yield_efficiency_fig_{date}.png` | `.png` image               | Composite performance chart for all machines × shifts   |
    | `Figure` object                                        | `matplotlib.figure.Figure` | Can be displayed in notebook or saved externally        |
    | **Subplots**                                           | 1 per machine              | Each shows stacked bars (items) + line (good quantity)  |
    | **Legend**                                             | Dynamic                    | Auto-adjusted based on item count or good quantity data |

### 7. Shift-based Mold Efficiency Dashboard:
- *Filename*: `shift_level_mold_efficiency_chart_{date}.png`                
- *Generated by*: `shift_level_mold_efficiency_plotter()`
- *Purpose*:
    - Visualizes mold efficiency metrics across working shifts and molds, combining comparative bar charts per metric.
    - Helps engineers evaluate how each mold performs across shifts regarding cavity utilization, cycle efficiency, production efficiency, and expected yield efficiency.
    - Enables data-driven identification of underperforming molds or inconsistent shift performance.
- *Input Features*:
    | Feature                                  | Description                                                                     |
    | ---------------------------------------- | ------------------------------------------------------------------------------- |
    | `recordDate`                             | Production record date                                                          |
    | `workingShift`                           | Shift index (used for per-shift grouping)                                       |
    | `machineNo`, `machineCode`               | Machine identifiers                                                             |
    | `itemName`, `itemCode`                   | Product names and codes associated with each mold                               |
    | `moldNo`                                 | Mold identifier (used as X-axis category)                                       |
    | `moldShot`                               | Number of shots per shift                                                       |
    | `moldCavity`                             | Number of active cavities during production                                     |
    | `moldCount`                              | Count of molds active per record (filters to 1 for valid rows)                  |
    | `itemTotalQuantity`, `itemGoodQuantity`  | Production output per shift                                                     |
    | `moldInfo_df` *(DataFrame)*              | External reference table containing `moldCavityStandard` and `moldSettingCycle` |
    | *(Defect & metadata columns)*            | Used for validation only (`itemBlackSpot`, `colorMasterbatchCode`, etc.)        |
    | `visualization_config_path` *(optional)* | Path to external JSON for visual configuration                                  |
    | `show_stats` *(bool, default=True)*      | Whether to display summary stats per subplot                                    |
    | `legend_position` *(str, default='top')* | Legend placement (`'top'`, `'all'`, `'first_subplot'`)                          |
- *Processing Logic*:
    - Validation: Check input columns using `validate_dataframe()`.
    - Configuration: Loads user-defined or default visualization parameters via `load_visualization_config()`.
    - Data Processing: Merge with `moldInfo_df`, filter valid records, and compute efficiency metrics (`moldCycle`, `moldCavityUtilizationRate`, `moldCycleEfficiency`, `overallProductionEfficiency`, `expectedYieldEfficiency`, etc.).
    - Data Preparation: Aggregate metrics by `moldNo` × `workingShift`, calculate per-shift and average values.
    - Visualization: Create 4 stacked bar charts (each metric), color-coded by shift with average overlay and mold grouping boxes.
- *Output Features*:
    | Output                                       | Type                       | Description                                  |
    | -------------------------------------------- | -------------------------- | -------------------------------------------- |
    | `shift_level_mold_efficiency_fig_{date}.png` | `.png` image               | Composite mold efficiency visualization      |
    | `Figure` object                              | `matplotlib.figure.Figure` | For display or file export                   |
    | **Subplots**                                 | 4 vertically stacked       | Each represents a specific efficiency metric |
    | **Bars per Mold**                            | (n_shifts + 1)             | Includes one per shift + one average         |
    | **Legend**                                   | Dynamic                    | Displays shift colors and average group      |
    | **Bounding Boxes**                           | Visual grouping            | Delineate mold sections                      |
    | **Statistics Overlay**                       | Optional                   | Displays mean and range on each subplot      |
            
### 8. Shift-based Yield Efficiency Dashboard:
- *Filename*: `shift_level_yield_efficiency_chart_{date}.png`
- *Generated by*: `shift_level_yield_efficiency_plotter()`
- *Purpose*: 
    - Visualizes yield performance per machine and shift, combining stacked bar charts of total vs. good quantities for each working shift.
    - Enables quick identification of efficiency variations between machines or across shifts.
    - Summarizes global statistics (total production, best/worst machines, overall efficiency) directly on the chart.
- *Input Features*:
    | Feature                                  | Description                                                                    |
    | ---------------------------------------- | ------------------------------------------------------------------------------ |
    | `recordDate`                             | Production record date                                                         |
    | `workingShift`                           | Shift index (used for color and grouping)                                      |
    | `machineNo`                              | Numeric identifier for machine (X-axis)                                        |
    | `machineCode`                            | Machine label (metadata)                                                       |
    | `itemTotalQuantity`                      | Total produced quantity per machine-shift                                      |
    | `itemGoodQuantity`                       | Number of non-defective (good) items per machine-shift                         |
    | *(Defect-related columns)*               | Used for validation only (`itemBlackSpot`, `itemOilDeposit`, etc.)             |
    | `visualization_config_path` *(optional)* | Path to custom visualization config JSON                                       |
    | *(Other metadata columns)*               | Include `moldNo`, `poNo`, `plasticResin`, etc., required for schema validation |
- *Processing Logic*:
    - Validation: Verify input schema using `validate_dataframe()` to ensure all required columns are present.
    - Configuration: Loads user-defined or default visualization parameters via `load_visualization_config()`.
    - Data Processing: 
        - Group data by `machineNo` × `workingShift`, compute `itemTotalQuantity`, `itemGoodQuantity`, and `efficiency` (%) via `safe_division()`.
        - Create three pivot tables (total, good, efficiency) for stacked bar visualization.
        - Compute total production, average yield, and identify best/worst performing machines using `calculate_performance_metrics()`.
    - Plotting:
        - Each subplot represents a machine with grouped bars for Total and Good quantities by shift.
        - Colors distinguish working shifts; efficiency (%) labels are added when the number of machines is small.
- *Output Features*:
    | Output                                        | Type                       | Description                                                  |
    | --------------------------------------------- | -------------------------- | ------------------------------------------------------------ |
    | `shift_level_yield_efficiency_fig_{date}.png` | `.png` image               | Consolidated yield efficiency chart across machines × shifts |
    | `Figure` object                               | `matplotlib.figure.Figure` | Can be rendered inline or exported via `plt.savefig()`       |
    | **Bars per Shift**                            | 2 per shift (Total + Good) | Represent total vs. good output quantities                   |
    | **Efficiency Labels**                         | Text overlay               | Displays per-machine efficiency (%) when space allows        |
    | **Summary Text**                              | Bottom annotation          | Shows total, good, overall yield, best/worst machine         |
    | **Legend**                                    | Auto-scaled                | Simplified or detailed depending on number of shifts         |